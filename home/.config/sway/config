set $mod Mod4
set $left h
set $down j
set $up k
set $right l
set $lock "swaylock -f -i ~/.config/sway/lockscreen.jpeg"
font "JetBrainsMono Nerd Font 12"

output * background ~/.config/sway/wallpaper.jpeg fill
floating_modifier $mod normal
default_border pixel 1
workspace_auto_back_and_forth yes

for_window {
    [app_id="org.gnome.Nautilus"] floating enable, resize set 1000 700, move position center
    [app_id="org.gnome.Calculator"] floating enable, move position center
}

assign {
    [app_id="firefox_firefox"] 1
    [app_id="Alacritty"] 2
    [app_id="telegram-desktop_telegram-desktop"] 3
}

exec_always {
    killall kanshi; kanshi
    killall mako;   mako --default-timeout 10000 --width 400
    killall waybar; waybar
}

exec {
    wl-paste --watch cliphist store
    swayidle -w before-sleep '$lock'
    alacritty
    telegram-desktop
    firefox
}

input type:touchpad {
    tap enabled
    natural_scroll enabled
}
input * {
    xkb_layout us,ru
    xkb_options caps:swapescape,grp:alt_shift_toggle
}

bindsym --to-code {
    # custom
    Ctrl+Alt+h   exec cliphist list | fuzzel -d | cliphist decode | wl-copy
    $mod+Shift+q kill
    $mod+d       exec fuzzel
    $mod+s       exec grim -g "$(slurp)" - | swappy -f -
    $mod+Shift+s exec grim - | swappy -f -
    $mod+e       exec nautilus
    $mod+c       exec gnome-calculator
    Ctrl+Space   exec makoctl dismiss --all
    $mod+Shift+r reload

    # moving
	$mod+$left        focus left
	$mod+$down        focus down
	$mod+$up          focus up
	$mod+$right       focus right
	$mod+Shift+$left  move left
	$mod+Shift+$down  move down
	$mod+Shift+$up    move up
	$mod+Shift+$right move right
	$mod+1            workspace number 1
	$mod+2            workspace number 2
	$mod+3            workspace number 3
	$mod+4            workspace number 4
	$mod+5            workspace number 5
	$mod+6            workspace number 6
	$mod+7            workspace number 7
	$mod+8            workspace number 8
	$mod+9            workspace number 9
	$mod+Shift+1      move container to workspace number 1, workspace number 1
	$mod+Shift+2      move container to workspace number 2, workspace number 2
	$mod+Shift+3      move container to workspace number 3, workspace number 3
	$mod+Shift+4      move container to workspace number 4, workspace number 4
	$mod+Shift+5      move container to workspace number 5, workspace number 5
	$mod+Shift+6      move container to workspace number 6, workspace number 6
	$mod+Shift+7      move container to workspace number 7, workspace number 7
	$mod+Shift+8      move container to workspace number 8, workspace number 8
	$mod+Shift+9      move container to workspace number 9, workspace number 9

    # layout
	$mod+q           layout toggle split
	$mod+f           fullscreen
    $mod+w           layout toggle split tabbed
	$mod+Shift+space floating toggle
	$mod+space       focus mode_toggle
	$mod+a           focus parent
	$mod+Shift+minus move scratchpad
	$mod+minus       scratchpad show

    # media keys
	--locked XF86AudioMute         exec pactl set-sink-mute \@DEFAULT_SINK@ toggle
	--locked XF86AudioLowerVolume  exec pactl set-sink-volume \@DEFAULT_SINK@ -5%
	--locked XF86AudioRaiseVolume  exec pactl set-sink-volume \@DEFAULT_SINK@ +5%
	--locked XF86AudioMicMute      exec pactl set-source-mute \@DEFAULT_SOURCE@ toggle
	--locked XF86MonBrightnessDown exec brightnessctl set 5%-
	--locked XF86MonBrightnessUp   exec brightnessctl set 5%+
}

# modes
set $resizemode "resizemode"
set $powermode "(e)xit sway, (p)oweroff (l)ock"
set $gapsmode "(e)nable (d)isable"

mode $resizemode {
    bindsym $left        resize shrink width  10px
    bindsym $down        resize grow height   10px
    bindsym $up          resize shrink height 10px
    bindsym $right       resize grow width    10px
    bindsym Shift+$left  resize shrink width  40px
    bindsym Shift+$down  resize grow height   40px
    bindsym Shift+$up    resize shrink height 40px
    bindsym Shift+$right resize grow width    40px
    bindsym Escape       mode "default"
}

mode $powermode {
    bindsym e      exec swaymsg exit,       mode "default"
    bindsym p      exec systemctl poweroff, mode "default"
    bindsym l      exec $lock,              mode "default"
    bindsym Escape mode "default"
}

mode $gapsmode {
    bindsym e gaps inner current set 50, mode "default"
    bindsym d gaps inner current set 0,  mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+0 mode $powermode
bindsym $mod+r mode $resizemode
bindsym $mod+g mode $gapsmode

include /etc/sway/config.d/*
